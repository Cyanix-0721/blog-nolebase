---
tags:
  - SpringCloud
  - Framework
---

# Spring Cloud Alibaba Sentinel Vs Spring Cloud Circuit Breaker

Spring Cloud Alibaba Sentinel 和 Spring Cloud Circuit Breaker（例如使用 Resilience4j 实现）虽然在某些功能上有重叠，但它们的定位、特性以及适用场景有所不同。可以说，**Sentinel 提供的功能更丰富、更广泛**，而 Circuit Breaker 更专注于断路器模式。以下是二者的详细对比：

## 1 主要功能对比

| 功能                | Sentinel                                    | Circuit Breaker (Resilience4j)                   |
|---------------------|---------------------------------------------|-------------------------------------------------|
| **熔断降级**        | 支持，根据响应时间或错误率熔断              | 支持，根据失败率、慢调用、超时等进行熔断       |
| **限流**            | 支持，按 QPS、并发数、热点参数等多种方式     | 不支持，Resilience4j 专注于熔断，不提供限流功能|
| **系统保护**        | 支持，基于系统的整体负载（如 CPU 使用率）保护| 不支持                                          |
| **热点参数限流**    | 支持，根据特定参数（如商品 ID）进行限流      | 不支持                                          |
| **集群流量控制**    | 支持，提供集群限流功能                       | 不支持                                          |
| **监控与规则管理**  | 提供强大的监控系统与动态规则管理（如 Sentinel 控制台） | 主要依赖 Spring Boot Actuator 进行监控和管理   |

## 2 应用场景不同

- **Sentinel** 作为 Spring Cloud Alibaba 生态中的一部分，最初是为高并发场景下的限流而设计，因此在流量控制、热点参数限流和系统保护方面更为强大。它不仅可以针对方法调用进行熔断和限流，还可以在高并发和分布式系统中，通过配置规则来实现动态流量调整和服务降级。

- **Circuit Breaker**（Resilience4j 或 Hystrix）则更注重熔断和服务降级，主要用于处理分布式系统中的**单个服务调用失败问题**。它的设计主要是为了提供断路器模式，防止长时间调用失败导致服务链路的崩溃。在限流、系统保护等方面，它的功能比较有限。

## 3 限流 Vs 熔断

- **Sentinel** 不仅提供熔断功能，还支持多种**限流策略**。它可以根据 QPS、并发数、甚至特定参数（如商品 ID）等进行限流控制，防止系统因流量过大而被压垮。此外，Sentinel 还能根据**系统状态**（如 CPU 使用率）动态调整流量限制。

- **Circuit Breaker** 则主要处理**熔断**，它的熔断规则通常是基于**错误率**、**超时**或者**慢调用**来判断服务是否需要熔断，并不具备限流功能。它更多是为了防止服务链路中某个服务出现故障时，导致整个系统受到影响。

## 4 系统保护

Sentinel 的**系统自适应保护**功能是 Circuit Breaker 所不具备的。Sentinel 能够监控系统的 CPU 使用率、负载等整体性能指标，并根据系统的当前负载动态调整限流策略，避免系统崩溃。而 Circuit Breaker 则没有这个层面的系统保护，它只是针对服务的调用链路做熔断保护。

## 5 热点参数限流

Sentinel 的**热点参数限流**是针对特定资源或参数（如电商平台中的商品 ID）进行限流的功能。它非常适合像电商平台这种高并发系统，防止单一商品的访问量过大导致整个服务过载。Circuit Breaker 则不提供类似的功能，无法根据特定参数对流量进行精细化的控制。

## 6 监控和动态规则管理

Sentinel 提供了**强大的控制台**，可以实时监控服务的运行状态，并且可以通过控制台**动态修改限流和熔断规则**。Circuit Breaker 通常依赖 Spring Boot Actuator 来实现监控，但 Actuator 的功能和 Sentinel 控制台相比较为基础，缺乏实时的流量控制和规则动态配置能力。

## 7 总结

- 如果你只需要简单的**熔断降级**功能，处理服务调用失败问题，**Circuit Breaker**（Resilience4j 或 Hystrix）可能已经足够。
  
- 如果你需要更多的**限流**、**系统保护**、**热点参数控制**等功能，尤其是在高并发电商平台场景下，**Sentinel** 是更好的选择。

因此，二者有一定的功能重叠（熔断和服务降级），但 Sentinel 功能更加全面，特别是在流量控制、热点参数限流和系统自适应保护等方面具有独特的优势。在实际项目中，选择哪个框架应根据你的具体需求和场景来决定。
